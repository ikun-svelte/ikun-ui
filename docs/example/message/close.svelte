<script>
    import { KButton } from '@ikun-ui/button'
    import { KMessage } from '@ikun-ui/message'
    const renderMessageClose = (title, content) => {
        KMessage({
            title,
            content,
            close: false
        })
    }

    const renderMessageAutoClose = (title, content) => {
        KMessage({
            title,
            content,
            autoClose: true
        })
    }

    let time = 5
    const renderMessageDuration = (title, content) => {
        time = 5
        KMessage({
            title,
            autoClose: true,
            content,
            duration: 5000,
        })
        let timer = setInterval(() => {
            if(time === 0){
                clearInterval(timer)
                return
            }
            time--
        },1000)
    }

    const renderMessageCb = (title, content) => {
        KMessage({
            title,
            content,
            onClose: () => {
                window.alert('close! ðŸŽ¯')
            }
        })
    }
</script>

<div class="flex items-center flex-wrap">
    <KButton cls="mx-2"
             on:click={()=> renderMessageClose(
                 'Hamlet',
                 'å“‡ï¼ŒçœŸçš„æ˜¯ä½ å•Š~',
                 'info')
                 }>
        can't manually close
    </KButton>

    <KButton cls="mx-2"
             on:click={()=> renderMessageAutoClose(
                 'Hamlet',
                 'å“‡ï¼ŒçœŸçš„æ˜¯ä½ å•Š~',
                 'info')
                 }>
        auto close
    </KButton>

    <KButton cls="mx-2"
             on:click={()=> renderMessageDuration(
                 'Hamlet',
                 'å“‡ï¼ŒçœŸçš„æ˜¯ä½ å•Š~',
                 'info')
                 }>
        duration {time}s
    </KButton>

    <KButton cls="mx-2"
             on:click={()=> renderMessageCb(
                 'close callback',
                 'é¸¡è„šéœ²å‡ºæ¥äº†ï¼Œå¿«å…³æŽ‰è¿™ä¸ªé¸¡è„šï¼',
                 'info')
                 }>
        close callback
    </KButton>
</div>
